function CollectiveFunction(n){function t(){for(var r=[],u=Array.From(arguments),f=this.length,i,t=0;t<f;t++)i=this[t],r.Add(i[n].apply(i,u));return arguments.length==1||n=="Style"?this:r}return t}function From(n){return new QueryClause(n)}function QueryClause(n){if(this.WhereClause=null,n.Type==Type.Array)this.Array=n;else if(n.Type==Type.Dictionary){var t=[];this.Array=t,n.ForEach(function(n){t.Add(n)})}else this.Array=Array.From(n);this.Type=Type.QueryClause}function Group(n,t,i){this.Key=n,this.Value=t,this.Items=i,this.Type=Type.Group}var NinJaQuery={Version:"1.0"},SortOrder;Type.QueryClause=Type.$++,Type.Group=Type.$++,SortOrder={},SortOrder.Ascending=0,SortOrder.Descending=1,Anchor.prototype.Query=Body.prototype.Query=Cell.prototype.Query=Content.prototype.Query=ContentButton.prototype.Query=Div.prototype.Query=Header.prototype.Query=Label.prototype.Query=List.prototype.Query=ListItem.prototype.Query=Row.prototype.Query=Span.prototype.Query=Table.prototype.Query=TableBody.prototype.Query=TableFoot.prototype.Query=TableHead.prototype.Query=TextBox.prototype.Query=function(n){for(var i=Array.From(this.DOM.querySelectorAll(n)),r=i.length,t=0;t<r;t++)i[t]=i[t].$||i[t];return i},Array.prototype.As=function(t){var i=t.prototype;for(n in i)this[n]=new CollectiveFunction(n);return this},QueryClause.prototype.Where=function(n){return this.WhereClause=n,this},QueryClause.prototype.Select=function(n){return this._Select(n,0)},QueryClause.prototype.SelectFirst=function(n){return this._Select(n,1)},QueryClause.prototype._Select=function(n,t){var i=[],f,o,r,e,u;if(this.Array.length==0)return i;for(f=this.Array,o=f.length,u=0;u<o;u++)if((r=f[u],!this.WhereClause||this.WhereClause(r))&&(n?(e=NinJa.EvalBind(n,r),i.push(NullOrUndefined(e)?"":e)):i.push(r),t==1&&i.length>0))return i[0];return i},Array.prototype.Distinct=function(n){var r=[],t,u,i,f=this.length;if(n==undefined)for(u=this.length,t=0;t<u;t++)i=this[t],r.Contains(i)||r.Add(i);else for(u=this.length,t=0;t<u;t++)i=NinJa.EvalBind(n,this[t])||"",r.Contains(i)||r.push(i);return r},Array.prototype.Index=function(){for(var f=this.length,u,t,i,r,n=0;n<f;n++){t=this[n],i="";for(u in t)r=t[u],NullOrUndefined(r)||(i+=r.toString().toLowerCase());t.$Index=i}return this},Array.prototype.Filter=function(n){if(n=n.toLowerCase().Split(" ",!0),n.length==0)return this;for(var f=this.length,u=[],i,e=n.length,r,t=0;t<f;t++){for(v=this[t],r=!0,i=0;i<e;i++)if(v.$Index&&!v.$Index.Contains(n[i])){r=!1;break}r&&u.push(v)}return u},Array.prototype.Sort=function(n,t,i){return this.length==0?this:this[0][n]===undefined?this:(t=t===undefined?SortOrder.Ascending:t,n?this.sort(function(i,r){return(v1=NinJa.EvalBind(n,i),v2=NinJa.EvalBind(n,r),v1===null||v1===undefined||v2===null||v2===undefined)?(v1===null||v1===undefined)&&v2!==null&&v2!==undefined?t==SortOrder.Descending?-1:1:(v1!==null||v1!==undefined)&&!(v2===null||v2===undefined)?t==SortOrder.Descending?1:-1:0:t==SortOrder.Descending?v1.Compare(v2)*-1:v1.Compare(v2)}):i?this.sort(function(i,r){return(v1=NinJa.EvalBind(n,i).toLowerCase(),v2=NinJa.EvalBind(n,r).toLowerCase(),v1===null||v1===undefined||v2===null||v2===undefined)?(v1===null||v1===undefined)&&v2!==null&&v2!==undefined?t==SortOrder.Descending?-1:1:(v1!==null||v1!==undefined)&&!(v2===null||v2===undefined)?t==SortOrder.Descending?1:-1:0:t==SortOrder.Descending?v1.Compare(v2)*-1:v1.Compare(v2)}):this.sort(function(n,i){var r=n,u=i;return r===null||r===undefined||u===null||u===undefined?(r===null||r===undefined)&&u!==null&&u!==undefined?t==SortOrder.Descending?-1:1:(r!==null||r!==undefined)&&!(u===null||u===undefined)?t==SortOrder.Descending?1:-1:0:t==SortOrder.Descending?r.Compare(u)*-1:r.Compare(u)}),this)},Array.prototype.Flatten=function(){for(var r=[],i,u,f=this.length,t,n=0;n<f;n++)for(i=this[n],u=i.length,t=0;t<u;t++)r.push(i[t]);return r},Array.prototype.Sum=function(){for(var n=0,i=0,r=!1,u=this.length,t,n=0;n<u;n++){if(t=this[n],t.Type===Type.String){if(!t.IsFloat()){r=!0;break}t=t.ToFloat()}i+=t}if(r)for(i="",n=0;n<u;n++)i+=this[n];return i},Array.prototype.Intersect=function(n){for(var i=[],r=n.length,t=0;t<r;t++)this.Contains(n[t])&&i.push(n[t]);return i},Array.prototype.Set=function(n,t){for(var f=this.length,i,u,r=0;r<f;r++)i=this[r],u=i[n],u.Type==Type.Function?i[n](t):i[n]=t},Array.prototype.Max=function(n){return Math.max.apply(n)},Array.prototype.Minimum=function(n){return Math.min.apply(n)},Array.prototype.Group=function(n){for(var i={},e=this.length,u,r,f,t=0;t<e;t++)u=this[t],r=NinJa.EvalBind(n,u),i[r]||(i[r]=new Group(n,r,[])),i[r].Items.Add(u);f=[];for(t in i)f.Add(i[t]);return f},Array.prototype.Subset=function(n,t){var r=[],u;if(n<0)return r;for(t=NullOrUndefined(t)?this.length:t,t>this.length&&(t=this.length),n>t&&(u=t,t=n,n=u),i=n;i<t;i++)r.Add(this[i]);return r},Array.prototype.Take=function(n){return a.Subset(0,n)};
//@ sourceMappingURL=NinJaQuery.min.js.map