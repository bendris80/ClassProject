function ValidationGroup(n){this.Validators=[],this._en=!0,this.Name=n,this.Summary=null}function ValidationEventArgs(n){this.ValidationResult=n}function Validator(n){var t,u,i,r;if(this.DOM===undefined)return Validator.Inherit(Validator.Extend(new Span(n).ClassName("validator")));t=this,n=t.DOM,t.MinLength=(n.getAttribute("minlength")||(n.getAttribute("required")||"false").ToBoolean()?"1":"0").ToInt(),t.MaxLength=(n.getAttribute("maxlength")||"10000000").ToInt(),t.__DV=n.getAttribute("default")||"",t.__Group=n.getAttribute("group")||"default",u=n.getAttribute("validates"),t.Anchor=new Anchor,t.__vd=new Delegate(this.Validate,this),t.LastValidationResult=!0,t.Validates(u),i=n.getAttribute("function"),i&&(i=="Date"?r=AV.Date:(r=AV[i],r||(r=window[i],t.__IsCustom=!0)),t.__Function=r),t.__GMessage=n.getAttribute("groupmessage")||t.Text(),t.Text("Invalid"),t.__GMessage===undefined&&t.Text(t.__GMessage),t.Collapsed(!0),NinJaValidation.__Group(t,t.__Group),t.Type=Type.Validator}function ValidationSummary(n){var t,i;if(this.DOM===undefined)return ValidationSummary.Inherit(ValidationSummary.Extend(new Div(n).ClassName("validatorsummary")));t=this,n=t.DOM,i=n.getAttribute("group")||"default",NinJaValidation.Groups[i]&&(NinJaValidation.Groups[i].Summary=t),t.Message=t.Content(),t.Collapsed(!0)}var ValidationStyles={FormPost:0,RealTime:1},ErrorDisplayStyles={Static:0,Dynamic:1},NinJaValidation={Groups:new Dictionary,AlphaNumRegX:/^[a-zA-Z0-9]+$/,ZipRegX:/^\d{5}(\-\d{4})?$/,TaxIDRegX:/^\d{2}\-?\d\-?\d{2}\-?\d{4}$/,PhoneRegX:/^(\(\d{3}\)|\d{3}\-?)\d{3}\-?\d{4}$/,EnableValidation:!0,OnValidation:new Event,ValidationStyle:ValidationStyles.FormPost},AV;$ValidationEventArgs=$Array,NinJaValidation.Groups.Add("default",new ValidationGroup("default")),Type.Validator=Type.$++,Page.OnLoad.Add(function(){Page.Form.OnSubmit.Add(NinJaValidation.RunValidation)}),NinJaValidation.OnValidation=new Event,NinJaValidation.FindValidatorFor=function(n){var i=$Element(n),t;return i==null?null:(t=null,NinJaValidation.Groups.Values().ForEach(function(n){return t=n.Validators.Find(function(n){return n.Element==i}),t!=null?!1:void 0}),t)},NinJaValidation.__Group=function(n,t){var i=NinJaValidation.Groups[t];i==undefined&&(NinJaValidation.Groups.Add(t,new ValidationGroup(t)),i=NinJaValidation.Groups[t]),i.Validators.Add(n)},NinJaValidation.RunValidation=function(n){if(!NinJaValidation.EnableValidation)return!0;var r=NinJa.Event,t=[],i=!1,u,f=new ValidationEventArgs;return NinJaValidation.Groups.ForEach(function(f){var o,s,h,c,e;if(n===undefined||n.Type!=Type.String||f.Key==n)if(o=0,f.Value._en){for(s=f.Value.Validators,c=s.length;o<c;o++)h=s[o],u=h.Validate(),u===!1&&(i=!0,t.Add(h));r.Type==Type.EventArgs&&(r.Handled=i),f.Value.Summary&&(e=f.Value.Summary,e.Content(e.Message),t.ForEach(function(n){n.Anchor.Content(n.__GMessage),e.AddElement(n.Anchor)}),e.Collapsed(t.length==0)),t.Clear()}else f.Value.Summary.Collapsed(!0)}),NinJaValidation.OnValidation.Fire(new ValidationEventArgs(!i)),!i},$Validator=$Anchor,Span.Extensions.Add(new Extension("validator",Validator)),Validator.prototype.DefaultValue=function(n){return n===undefined?this.__DV:(this.__DV=n,this)},Validator.prototype.Function=function(n){var t=this;return n===undefined?t.__Function:(t.__Function=n,this)},Validator.prototype.Group=function(n){return n===undefined?this.__Group:(this.__Group&&NinJaValidation.Groups[this.__Group]&&NinJaValidation.Groups[this.__Group].Validators.Remove(this),this.__Group=n,NinJaValidation.__Group(this,this.__Group),this)},Validator.prototype.GroupMessage=function(n){return n===undefined?this.__GMessage:(this.__GMessage=n,this)},Validator.prototype.Validates=function(n){var t=this,i,r;if(n===undefined)return t.Element;if(r=t.Element,t.Element=$RadioButtonGroup(n)?$RadioButtonGroup(n):$Element(n),t.Element===null&&n!==null){alert('Validator assigned to invalid id "'+n+'".');return}return i=t.Element,t.Anchor.OnClick.Clear(),n&&i.Focus!==undefined&&t.Anchor.OnClick.Add(new Delegate(i.Focus,i)),NinJaValidation.ValidationStyle==ValidationStyles.RealTime&&(NullOrUndefined(i)||i.OnChange.Add(t.__vd)),this},Validator.prototype.HideValidation=function(){this.Collapsed(!0)},Validator.prototype.ShowValidation=function(){this.LastValidationResult===!1&&this.Collapsed(!1)},Validator.prototype.Validate=function(){var f,i,r,u,n=!0,t;return this.Element!==null?this.Element.Type==Type.RadioButtonGroup?(r=this.Element[0].Displayed(),u=this.Element[0].Enabled()):(r=this.Element.Displayed?this.Element.Displayed():!0,u=this.Element.Enabled()):u=r=!0,this._en&&r&&u&&(NullOrUndefined(this.Element)?this.__Function&&this.__Function()===!1&&(n=!1):(i=this.Element.Value()||"",this.__IsCustom||(f=i.length,this.Element.Type==Type.CheckBox&&this.MinLength>0?this.Element.Checked()||(n=!1):f<this.MinLength||f>this.MaxLength?n=!1:i==this.__DV&&this.MinLength>0&&(n=!1)),!NullOrUndefined(this.__Function)&&(i.length>0||this.__IsCustom)&&this.__Function(this.Element)===!1&&(n=!1))),NinJaValidation.ErrorDisplayStyle==ErrorDisplayStyles.Dynamic&&(this.Collapsed(n),n==!0&&(t=this.Anchor.Parent(),NullOrUndefined(t)||(t.RemoveElement(this.Anchor),t.DOM.children.length==1&&t.Collapsed(!0)))),this.LastValidationResult=n,n},AV={},AV.RegX=function(n,t){var i=n.Value();return i.match(NinJaValidation[t+"RegX"])!=null},AV.Number=function(n){return n.Value().IsFloat()},AV.PositiveNumber=function(n){return n.Value().IsFloat()&&n.Value().ToFloat()>0},AV.Integer=function(n){return n.Value().IsInt()},AV.PositiveInteger=function(n){return n.Value().IsInt()&&n.Value().ToFloat()>0},AV.NonnegativeInteger=function(n){return n.Value().IsInt()&&n.Value().ToFloat()>=0},AV.Date=function(n){return n.Value().IsDate()},AV.Zip=function(n){return AV.RegX(n,"Zip")},AV.TaxID=function(n){return AV.RegX(n,"TaxID")},AV.Phone=function(n){return AV.RegX(n,"Phone")},AV.AlphaNumeric=function(n){return AV.RegX(n,"AlphaNum")},AV.Currency=function(n){var t=n.Value();return t.StartsWith("$")&&(t=t.Remove("$")),t=t.RemoveAll(","),t.IsFloat()&&t.ToFloat()>=0},AV.FutureDate=function(n){var t=n.Value();return t.IsDate()?(t=t.ToDateTime(),t>DateTime.Now()):!1},AV.TodayOrFutureDate=function(n){var t=n.Value(),i;return t.IsDate()?(t=t.ToDateTime(),i=DateTime.Now(),t.Ticks()>=new DateTime(i.Year(),i.Month(),i.Date()).Ticks()):!1},Div.Extensions.Add(new Extension("validatorsummary",ValidationSummary)),Validator.Extensions=[new Extension("validator",Validator)];
//@ sourceMappingURL=NinJaValidation.min.js.map